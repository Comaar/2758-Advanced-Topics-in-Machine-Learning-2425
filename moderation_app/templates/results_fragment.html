{% if error %}
  <div class="error"><strong>Error:</strong> {{ error }}</div>
{% endif %}

{% if uploaded_filename %}
  <p><strong>Processed file:</strong> {{ uploaded_filename }}</p>
{% endif %}

{% if text_results %}
  <h3>Text Moderation Result</h3>
  {% if text_results.status == 'processed' %}
    <p><strong>Label:</strong> {{ text_results.label }}</p>
    <p><strong>Toxicity Score:</strong> {{ "%.4f"|format(text_results.score) }}</p>
  {% elif text_results.status == 'no_text' %}
    <p><em>No text found in PDF.</em></p>
  {% elif text_results.status == 'error' %}
    <p style="color:red;"><em>Error in text moderation: {{ text_results.message }}</em></p>
  {% endif %}
{% endif %}

{% if image_results %}
  <h3>Image Moderation Results</h3>
  {% for img in image_results %}
    <div style="border:1px solid #ccc; padding:10px; margin:10px 0;">
      <strong>Page {{ img.page_number }}, Image {{ img.image_index }}</strong><br>
      {% if img.status == 'processed' %}
        <ul>
          <li><strong>Sexually Explicit:</strong> {{ img.results.sexually_explicit }}</li>
          <li><strong>Dangerous:</strong> {{ img.results.dangerous }}</li>
          <li><strong>Violence/Gore:</strong> {{ img.results.violence_gore }}</li>
          <li><strong>Hate Symbol:</strong> {{ img.results.hate_symbol }}</li>
        </ul>
      {% elif img.status == 'error' %}
        <p style="color:red;">Error: {{ img.message }}</p>
      {% elif img.status == 'skipped' %}
        <p><em>Skipped: {{ img.message }}</em></p>
      {% endif %}
    </div>
  {% endfor %}
{% endif %}
